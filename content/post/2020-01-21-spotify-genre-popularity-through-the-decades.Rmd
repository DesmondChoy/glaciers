---
title: Spotify Genre Popularity Through Time
author: Desmond Choy
date: '2020-01-21'
slug: spotify-genre-popularity-through-the-decades
categories: []
tags:
  - r
  - EDA
  - visualization
  - tidytuesday
keywords:
  - tech
editor_options: 
  chunk_output_type: console
---

```{r Setup, include=FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  fig.width = 15,
  fig.height = 12)
```

```{r Libraries, warning=FALSE, message=FALSE, echo=FALSE}
library(tidyverse)
library(lubridate)
library(hrbrthemes)
library(tidytext)
```

This dataset was taken from the very popular [TidyTuesday](https://github.com/rfordatascience/tidytuesday) github repo, and this was my attempt at having a go at visualization given my love for music and this was a Spotify dataset.   

Datasets from TidyTuesday are usually cleaned (or at least there'll be instructions/hints on what one should first start with), and I begin by importing the data and wrangling it slightly by labelling the decades.

In the spirit of "[Perfect is the enemy of good](https://en.wikipedia.org/wiki/Perfect_is_the_enemy_of_good)", this will be a short post aimed at answering just a couple of questions with EDA and visualization.

```{r}
spotify_songs <-
  read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv')

spotify <- spotify_songs %>%
  distinct(track_name, track_artist, .keep_all = TRUE) %>%
  mutate(year = str_extract(track_album_release_date, "^\\d..."))

spotify$decades <- cut(
  as.numeric(spotify$year),
  c(1956, 1960, 1970, 1980, 1990, 2000, 2010, 2021),
  labels = c("50s", "60s", "70s", "80s", "90s", "2000s", "2010s")
)

```

Using track popularity as a gauge, how have subgenres evolved over the decades?  

```{r}
spotify %>%
  group_by(decades, playlist_subgenre) %>%
  add_count(playlist_subgenre) %>% 
  filter(n > 5) %>% 
  ggplot(aes(
    reorder_within(playlist_subgenre, track_popularity, decades),
    track_popularity
  )) +
  geom_boxplot(aes(fill = playlist_genre)) +
  coord_flip() +
  facet_wrap(decades ~ ., nrow = 2, scales = "free_y") +
  scale_x_reordered() +
  theme_ipsum() +
  labs(
    title = "Popularity of Genres Through The Decades",
    subtitle = "Recent Decades Saw An Explosion of Music Genres - Led by Rock and R&B",
    caption = "\n Source: TidyTuesday
      Visualization: Desmond Choy (Twitter @Norest)",
    fill = "Music Genres",
    x = "Music Sub-Genres",
    y = "Track Popularity"
  ) +
  theme(
    plot.title = element_text(face = "bold", size = 25),
    plot.subtitle = element_text(size = 15),
    strip.background = element_blank(),
    strip.text = element_text(face = "bold", size = 15),
    legend.position = "top",
    legend.title = element_text("Music Genres"),
    legend.box = "horizontal",
    legend.text = element_text(size = 10)
  ) +
  guides(row = guide_legend(nrow = 1))

```

Permanent wave stood out to me as a rock sub-genre that, until 2010, stood the test of time in terms of popularity.  

But as an avid music fan, I've not heard of permanent wave at all! Digging into the dataset a little more ... permanent wave actually had a few of my all-time favourite artists!

```{r}
spotify %>% 
  filter(playlist_subgenre == "permanent wave") %>% 
  count(track_artist, sort = TRUE) 
```



